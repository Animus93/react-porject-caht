{"version":3,"file":"static/js/362.5bb12661.chunk.js","mappings":"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","sources":["webpack://react-porject-caht/./src/components/MainForm/LeftBlok/LeftBlok.module.css?77e6","components/MainForm/LeftBlok/LeftBlok.jsx","webpack://react-porject-caht/./src/components/MainForm/MainForm.module.css?5ffe","components/MainForm/MainForm.jsx","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LeftBlok_content__QNNSR\",\"title\":\"LeftBlok_title__aIS1w\",\"each\":\"LeftBlok_each__XyTeO\",\"online\":\"LeftBlok_online__SAlSN\",\"offline\":\"LeftBlok_offline__lelKe\",\"closeBtn\":\"LeftBlok_closeBtn__ndND0\"};","import { useGetUsersQuery } from 'redux/usersApiMockapi';\nimport styles from './LeftBlok.module.css';\n\nconst LeftBlok = (props) => {\n  const { data: users } = useGetUsersQuery();\n\n\n  return (\n    <>\n        <button \n        className={styles.closeBtn}\n        onClick ={()=> props.showLeftBlok()}\n        ></button>\n            <p>\n            <b className={styles.title}>Пользователи онлайн</b>\n          </p>\n    {users && users.map(users => {\n      return (<div key={users.user.email} className={styles.content}>\n        <div className={styles.each}>\n      <b className={!users.isOnline ? styles.offline : styles.online}>{users.user.name}</b>\n        </div>\n      </div>)\n    })}\n    </>\n  );\n};\nexport default LeftBlok;\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"MainForm_content__f9e54\",\"leftBlok\":\"MainForm_leftBlok__IoVdE\",\"cont2\":\"MainForm_cont2__d+61u\",\"rightBlok\":\"MainForm_rightBlok__aqzqY\",\"caht\":\"MainForm_caht__dkCmm\",\"cahtMessage\":\"MainForm_cahtMessage__K06jE\",\"createdAt\":\"MainForm_createdAt__39lFz\",\"myMessage\":\"MainForm_myMessage__asrmx MainForm_cahtMessage__K06jE\",\"name\":\"MainForm_name__+ZKQz\",\"text\":\"MainForm_text__1SW63\",\"user\":\"MainForm_user__jd2wi\",\"inp\":\"MainForm_inp__BtdlU\",\"usersList\":\"MainForm_usersList__e8hNf\",\"open\":\"MainForm_open__45u4Q\"};","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  useAddMessageMutation,\n  useGetMessagesQuery,\n  useUpdateMessagesMutation,\n} from 'redux/chatApiMockapi';\nimport {\n  useUpdateUsersMutation,\n  useUserOfflineMutation,\n} from 'redux/usersApiMockapi';\nimport LeftBlok from './LeftBlok/LeftBlok';\nimport styles from './MainForm.module.css';\n\nconst MainForm = () => {\n  const [offline] = useUserOfflineMutation();\n  const current = useSelector(state => state.user);\n  const { data, isLoading } = useGetMessagesQuery();\n  const [dataUpd] = useUpdateMessagesMutation();\n  const [usersUpd] = useUpdateUsersMutation();\n  const [newMessage] = useAddMessageMutation();\n  const [active, setActive] = useState();\n\n  useEffect(() => {\n    window.screen.width > 900? setActive(false):setActive(true)\n    console.log(window.screen.width)\n    scrollDown();\n    return;\n  }, [data]);\n\n  const scrollDown = () => {\n    const list = document.querySelector('#messages');\n    if (list.children[0].lastElementChild) {\n      return list.children[0].lastElementChild.scrollIntoView();\n    }\n  };\n\n  const sendMessage = async e => {\n    scrollDown();\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const messageText = e.currentTarget.textContent;\n      e.currentTarget.textContent = '';\n      const postDate = `${new Date()\n        .toLocaleDateString()\n        .slice(0, -5)} ${new Date().toLocaleTimeString().slice(0, -3)}`;\n      const createNewMessage = {\n        createdAt: postDate,\n        name: current.user.name,\n        text: messageText,\n      };\n      await newMessage(createNewMessage);\n    }\n  };\n  const update = () => {\n    dataUpd();\n    usersUpd();\n  };\n\n  const showLeftBlok = () => {\n    setActive(!active);\n  };\n\n  return (\n    <div className={styles.content}>\n      <div className={styles.user}>\n        <b>{current.user.name}</b>\n        <button onClick={() => offline(current.id)}>Logout</button>\n      </div>\n      {active ? (\n        <button className={styles.usersList} onClick={showLeftBlok}>\n        </button>\n      ) : (\n        <div className={active?styles.leftBlok:styles.open}>\n          <LeftBlok showLeftBlok={showLeftBlok}/>\n        </div>\n      )}\n      <div id=\"messages\" className={styles.rightBlok}>\n        {isLoading ? (\n          <p>Load chat messages</p>\n        ) : (\n          <div className={styles.caht}>\n            {data.map(message => {\n              return (\n                <div\n                  id=\"caht\"\n                  key={message.id}\n                  className={\n                    message.name === current.user.name\n                      ? styles.myMessage\n                      : styles.cahtMessage\n                  }\n                >\n                  <p className={styles.name}>{message.name}</p>\n                  <p className={styles.text}>{message.text}</p>\n                  <p className={styles.createdAt}>{message.createdAt}</p>\n                </div>\n              );\n            })}\n          </div>\n        )}\n        <div\n          className={styles.inp}\n          data-placeholder=\"Message\"\n          contentEditable=\"true\"\n          onKeyDown={sendMessage}\n        ></div>\n        <button onClick={update}>Обновить</button>\n      </div>\n    </div>\n  );\n};\nexport default MainForm;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["props","users","useGetUsersQuery","data","className","styles","onClick","showLeftBlok","map","isOnline","user","name","email","useUserOfflineMutation","offline","current","useSelector","state","useGetMessagesQuery","isLoading","useUpdateMessagesMutation","dataUpd","useUpdateUsersMutation","usersUpd","useAddMessageMutation","newMessage","useState","active","setActive","useEffect","window","screen","width","console","log","scrollDown","list","document","querySelector","children","lastElementChild","scrollIntoView","sendMessage","e","key","preventDefault","messageText","currentTarget","textContent","postDate","Date","toLocaleDateString","slice","toLocaleTimeString","createNewMessage","createdAt","text","id","message","contentEditable","onKeyDown","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"sourceRoot":""}